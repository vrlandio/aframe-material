{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils.js","webpack:///./src/keyboard/assets.js","webpack:///./src/core/event.js","webpack:///./src/keyboard/config.js","webpack:///./src/keyboard/behaviors.js","webpack:///./src/index.js","webpack:///./src/keyboard/index.js","webpack:///./src/keyboard/draw.js","webpack:///./src/keyboard/layouts.js","webpack:///./src/keyboard/sfx.js","webpack:///./src/input/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Utils","assets_arr","already_exists","assets","document","querySelector","scene","createElement","appendChild","item","stuff","Array","from","children","id","asset_item","type","setAttribute","src","a","b","original","isArray","slice","clone","getPrototypeOf","undefined","keys","getOwnPropertyNames","length","getOwnPropertyDescriptor","el","opacity","hasAttribute","props","getAttribute","object3D","traverse","material","transparent","text","querySelectorAll","wrapCount","widthFactor","components","currentFont","aframeKeyboardShift","AFRAME","ASSETS_PATH","aframeKeyboardShiftActive","aframeKeyboardGlobal","aframeKeyboardBackspace","aframeKeyboardEnter","aframeKeyboardDismiss","aframeKeyboardShadow","aframeKeyboardKeyIn","aframeKeyboardKeyDown","emit","data","console","error","dispatchEvent","CustomEvent","detail","KEYBOARD_COLOR","KEY_COLOR_HIGHLIGHT","KEY_COLOR_ACTIVE","SPACEBAR_COLOR_ACTIVE","SPACEBAR_COLOR_HIGHLIGHT","KEY_WIDTH","SPACE_KEY_WIDTH","SPACE_KEY_HEIGHT","ACTION_WIDTH","Assets","require","Config","Event","Behaviors","o_position","position","copy","isOpen","child","parentNode","sceneEl","x","THREE","Vector3","removeEventListener","keyClick","keyOut","keyIn","parent","removeChild","_transitioning","addEventListener","this","isShiftEnabled","toUpperCase","shiftToggle","isSymbols","symbolsToggle","destroyKeyboard","z","icon_el","shiftKey","keyEl","key_id","key_type","startsWith","textEl","toLowerCase","alphabeticalLayout","symbolsLayout","Draw","registerComponent","schema","default","physicalKeyboard","currentInput","init","that","keydownEventKey","inputEvent","didFocusInputEventKey","didBlurInputEvent","dismissEvent","backspaceEvent","onTabNextInput","numericalUI","mainUI","actionsUI","actionsLayout","show","showKeyboard","hide","hideKeyboard","open","openKeyboard","dismiss","dismissKeyboard","destroy","update","tick","remove","pause","play","e","stopPropagation","preventDefault","appendString","deleteLast","blur","inputs","focus","registerPrimitive","defaultComponents","keyboard","mappings","Layouts","SFX","wrapper","numerical","index_y","index_x","y","alphabetical","prev_was_space","symbols","actions","val_y","addKeyEvents","shadow_el","letter_el","circle_el","sound","stopSound","playSound","keyDown","disabled","color","align","font","letterSpacing","lineHeight","side","tabSize","placeholder","placeholderColor","maxLength","width","cursorWidth","cursorHeight","cursorColor","backgroundColor","backgroundOpacity","background","cursor","setString","blink","set","configurable","isFocused","clearInterval","cursorInterval","setInterval","noemit","str","updateText","padding","attr","getTextWidth","trimFirst","_widthFactor","v","geometry","visibleGlyphs","line","substr","getWidthFactor","cursorTimer","clearTimeout","setTimeout","substring","repeat","placeholder_props","updateCursor","removeObject3D","input"],"mappings":"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","file":"aframe-material.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","const Utils = {};\n\n/**\n  Utils.preloadAssets([])\n  Add assets to Assets managment system.\n*/\nUtils.preloadAssets = assets_arr => {\n\n\tlet assets = document.querySelector( \"a-assets\" ),\n\t\talready_exists;\n\n\tif ( ! assets ) {\n\n\t\tvar scene = document.querySelector( \"a-scene\" );\n\t\tassets = document.createElement( \"a-assets\" );\n\t\tscene.appendChild( assets );\n\n\t}\n\n\tfor ( let item of assets_arr ) {\n\n\t\talready_exists = false;\n\n\t\t/***** With Edge, assets.children is a HTMLCollection, not an Array! *****/\n\t\tfor ( let stuff of Array.from( assets.children ) ) {\n\n\t\t\tif ( item.id === stuff.id ) {\n\n\t\t\t\talready_exists = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ! already_exists ) {\n\n\t\t\tvar asset_item = document.createElement( item.type );\n\t\t\tasset_item.setAttribute( \"id\", item.id );\n\t\t\tasset_item.setAttribute( \"src\", item.src );\n\t\t\tassets.appendChild( asset_item );\n\n\t\t}\n\n\t}\n\n};\n\n/**\n  Utils.extend(a, b)\n  Assign object to other object.\n*/\nUtils.extend = function ( a, b ) {\n\n\tfor ( let key in b ) {\n\n\t\tif ( b.hasOwnProperty( key ) ) {\n\n\t\t\ta[ key ] = b[ key ];\n\n\t\t}\n\n\t}\n\treturn a;\n\n};\n\nUtils.clone = function ( original ) {\n\n\tif ( Array.isArray( original ) ) {\n\n\t\treturn original.slice( 0 );\n\n\t}\n\n\t// First create an empty object with\n\t// same prototype of our original source\n\tconst clone = Object.create( Object.getPrototypeOf( original ) );\n\tlet i = undefined;\n\tconst keys = Object.getOwnPropertyNames( original );\n\ti = 0;\n\twhile ( i < keys.length ) {\n\n\t\t// copy each property into the clone\n\t\tObject.defineProperty( clone, keys[ i ], Object.getOwnPropertyDescriptor( original, keys[ i ] ) );\n\t\ti ++;\n\n\t}\n\treturn clone;\n\n};\n\nUtils.updateOpacity = function ( el, opacity ) {\n\n\tif ( el.hasAttribute( \"text\" ) ) {\n\n\t\tlet props = el.getAttribute( \"text\" );\n\t\tif ( props ) {\n\n\t\t\tprops.opacity = opacity;\n\t\t\tel.setAttribute( \"text\", props );\n\n\t\t}\n\n\t}\n\tel.object3D.traverse( function ( o ) {\n\n\t\tif ( o.material ) {\n\n\t\t\to.material.transparent = true;\n\t\t\to.material.opacity = opacity;\n\n\t\t}\n\n\t} );\n\tfor ( let text of el.querySelectorAll( \"a-text\" ) ) {\n\n\t\ttext.setAttribute( \"opacity\", opacity );\n\n\t}\n\n};\n\n// Calculate the width factor\nUtils.getWidthFactor = function ( el, wrapCount ) {\n\n\tlet widthFactor = 0.00001;\n\tif ( el.components.text && el.components.text.currentFont ) {\n\n\t\twidthFactor = el.components.text.currentFont.widthFactor;\n\t\twidthFactor = ( 0.5 + wrapCount ) * widthFactor;\n\n\t}\n\treturn widthFactor;\n\n};\n\nmodule.exports = Utils;\n","module.exports = {\n\taframeKeyboardShift: `/${AFRAME.ASSETS_PATH}/images/keyboard/ShiftIcon.png`,\n\taframeKeyboardShiftActive: `/${AFRAME.ASSETS_PATH}/images/keyboard/ShiftActiveIcon.png`,\n\taframeKeyboardGlobal: `/${AFRAME.ASSETS_PATH}/images/keyboard/GlobalIcon.png`,\n\taframeKeyboardBackspace: `/${AFRAME.ASSETS_PATH}/images/keyboard/BackspaceIcon.png`,\n\taframeKeyboardEnter: `/${AFRAME.ASSETS_PATH}/images/keyboard/EnterIcon.png`,\n\taframeKeyboardDismiss: `/${AFRAME.ASSETS_PATH}/images/keyboard/DismissIcon.png`,\n\taframeKeyboardShadow: `/${AFRAME.ASSETS_PATH}/images/keyboard/KeyShadow.png`,\n\taframeKeyboardKeyIn: `/${AFRAME.ASSETS_PATH}/sounds/KeyIn.mp3`,\n\taframeKeyboardKeyDown: `/${AFRAME.ASSETS_PATH}/sounds/KeyDown.mp3`\n};\n","module.exports = {\n\temit: ( el, name, data ) => {\n\n\t\tconsole.error( \"emit\", data );\n\t\tconsole.error( data );\n\t\tconsole.error( name );\n\t\tconsole.error( el );\n\n\t\tel.dispatchEvent( new CustomEvent( name, { detail: data } ) );\n\n\t}\n};\n","const Config = {\n\tKEYBOARD_COLOR: \"#263238\",\n\tKEY_COLOR_HIGHLIGHT: \"#29363c\",\n\tKEY_COLOR_ACTIVE: \"#404b50\",\n\tSPACEBAR_COLOR_ACTIVE: \"#3c464b\",\n\tSPACEBAR_COLOR_HIGHLIGHT: \"#445055\",\n\tKEY_WIDTH: 0.08,\n\tSPACE_KEY_WIDTH: 0.368,\n\tSPACE_KEY_HEIGHT: 0.05,\n\tACTION_WIDTH: 0.14\n};\n\nmodule.exports = Config;\n","const Assets = require( \"./assets\" );\nconst Config = require( \"./config\" );\nconst Utils = require( \"../utils\" );\nconst Event = require( \"../core/event\" );\n//const SFX = require(\"./sfx\");\nconst Behaviors = {};\n\nBehaviors.el = null;\n\n// -----------------------------------------------------------------------------\n// KEYBOARD METHODS\n\nBehaviors.showKeyboard = function ( el ) {\n\n\tif ( el.o_position ) {\n\n\t\tel.object3D.position.copy( el.o_position );\n\n\t}\n\tel.isOpen = true;\n\tfor ( let item of el.querySelectorAll( \"[data-ui]\" ) ) {\n\n\t\tfor ( let child of item.children ) {\n\n\t\t\tchild.setAttribute( \"show\", true );\n\n\t\t}\n\n\t}\n\tlet parent = el.parentNode;\n\tif ( parent ) {\n\n\t\treturn;\n\n\t}\n\tel.sceneEl.appendChild( el );\n\n};\n\nBehaviors.hideKeyboard = function ( el ) {\n\n\tlet position = el.getAttribute( \"position\" );\n\tif ( position.x !== - 10000 ) {\n\n\t\tif ( ! el.o_position ) {\n\n\t\t\tel.o_position = new THREE.Vector3();\n\n\t\t}\n\t\tel.o_position.copy( position );\n\n\t}\n\tel.isOpen = false;\n\tel.setAttribute( \"position\", \"-10000 -10000 -10000\" );\n\n};\n\nBehaviors.destroyKeyboard = function ( el ) {\n\n\t//el.removeEventListener(\"click\", Behaviors.keyClick);\n\tel.removeEventListener( \"mousedown\", Behaviors.keyClick );\n\tel.removeEventListener( \"mouseup\", Behaviors.keyOut );\n\tel.removeEventListener( \"raycaster-intersected\", Behaviors.keyIn );\n\tel.removeEventListener( \"raycaster-intersected-cleared\", Behaviors.keyOut );\n\tlet parent = el.parentNode;\n\tif ( ! parent ) {\n\n\t\treturn;\n\n\t}\n\tparent.removeChild( el );\n\n};\n\nBehaviors.openKeyboard = function ( el ) {\n\n\tif ( el.o_position ) {\n\n\t\tel.object3D.position.copy( el.o_position );\n\n\t}\n\tel.isOpen = true;\n\tel._transitioning = true;\n\tlet parent = el.parentNode;\n\tif ( ! parent ) {\n\n\t\tel.sceneEl.appendChild( el );\n\n\t}\n\tfor ( let item of el.querySelectorAll( \"[data-ui]\" ) ) {\n\n\t\tfor ( let child of item.children ) {\n\n\t\t\tchild.setAttribute( \"hide\", true );\n\n\t\t}\n\n\t}\n\n};\n\nBehaviors.dismissKeyboard = function ( el ) {\n\n\tel._transitioning = true;\n\tfor ( let item of el.querySelectorAll( \"[data-ui]\" ) ) {\n\n\t\tfor ( let child of item.children ) {\n\n\t\t\tchild.setAttribute( \"show\", true );\n\n\t\t}\n\t\tel.isOpen = false;\n\n\t}\n\n};\n\n// -----------------------------------------------------------------------------\n// KEY EVENTS\n\nBehaviors.addKeyEvents = el => {\n\n\t// el.addEventListener(\"click\", Behaviors.keyClick);\n\tel.addEventListener( \"mousedown\", Behaviors.keyClick );\n\tel.addEventListener( \"mouseup\", Behaviors.keyOut );\n\tel.addEventListener( \"raycaster-intersected\", Behaviors.keyIn );\n\tel.addEventListener( \"raycaster-intersected-cleared\", Behaviors.keyOut );\n\t//triggerdown\n\t// https://aframe.io/docs/0.6.0/components/hand-controls.html\n\n};\n\n// -----------------------------------------------------------------------------\n// KEYCLICK\n\nBehaviors.keyClick = function () {\n\n\t// SFX.keyDown(Behaviors.el);\n\n\tlet type = this.getAttribute( \"key-type\" );\n\tlet value = this.getAttribute( \"key-value\" );\n\n\tif ( type === \"text\" || type === \"spacebar\" ) {\n\n\t\tif ( type === \"spacebar\" ) {\n\n\t\t\tvalue = \" \";\n\n\t\t}\n\t\tif ( Behaviors.isShiftEnabled ) {\n\n\t\t\tvalue = value.toUpperCase();\n\t\t\tBehaviors.shiftToggle();\n\n\t\t} else if ( Behaviors.isSymbols ) {\n\n\t\t\tBehaviors.symbolsToggle();\n\n\t\t}\n\t\tEvent.emit( Behaviors.el, \"input\", value );\n\n\t} else if ( type === \"shift\" ) {\n\n\t\tBehaviors.shiftToggle();\n\n\t} else if ( type === \"symbol\" ) {\n\n\t\tBehaviors.symbolsToggle();\n\n\t} else if ( type === \"backspace\" ) {\n\n\t\tEvent.emit( Behaviors.el, \"backspace\" );\n\n\t} else if ( type === \"enter\" ) {\n\n\t\t//Event.emit(Behaviors.el, 'input', '\\n');\n\t\t//Event.emit(Behaviors.el, 'enter', '\\n');\n\n\t\tBehaviors.destroyKeyboard( Behaviors.el );\n\t\t// Event.emit(Behaviors.el, 'dismiss');\n\n\t} else if ( type === \"dismiss\" ) {\n\n\t\tEvent.emit( Behaviors.el, \"dismiss\" );\n\n\t}\n\n};\n\n// -----------------------------------------------------------------------------\n// KEYDOWN\n\nBehaviors.keyDown = function () {\n\n\tif ( Behaviors.el._transitioning ) {\n\n\t\treturn;\n\n\t}\n\tthis.object3D.position.z = 0.003;\n\tif ( this.getAttribute( \"key-type\" ) === \"spacebar\" ) {\n\n\t\tthis.setAttribute( \"color\", Config.SPACEBAR_COLOR_ACTIVE );\n\n\t} else {\n\n\t\tthis.setAttribute( \"color\", Config.KEY_COLOR_ACTIVE );\n\n\t}\n\n};\n\n// -----------------------------------------------------------------------------\n// KEYIN\n\nBehaviors.keyIn = function () {\n\n\tif ( Behaviors.el._transitioning ) {\n\n\t\treturn;\n\n\t}\n\tif ( this.object3D.children[ 2 ] && this.object3D.children[ 2 ].material && ! this.object3D.children[ 2 ].material.opacity ) {\n\n\t\treturn;\n\n\t}\n\n\tif ( this.getAttribute( \"key-type\" ) === \"spacebar\" ) {\n\n\t\tthis.setAttribute( \"color\", Config.SPACEBAR_COLOR_HIGHLIGHT );\n\n\t} else {\n\n\t\tthis.setAttribute( \"color\", Config.KEY_COLOR_HIGHLIGHT );\n\n\t}\n\n};\n\n// -----------------------------------------------------------------------------\n// KEYOUT\n\nBehaviors.keyOut = function () {\n\n\tthis.object3D.position.z = 0;\n\tif ( this.getAttribute( \"key-type\" ) === \"spacebar\" ) {\n\n\t\tthis.setAttribute( \"color\", Config.KEY_COLOR_ACTIVE );\n\n\t} else {\n\n\t\tthis.setAttribute( \"color\", Config.KEYBOARD_COLOR );\n\n\t}\n\n};\n\n// -----------------------------------------------------------------------------\n// SHIFT\n\nBehaviors.isShiftEnabled = false;\nBehaviors.shiftToggle = function () {\n\n\tBehaviors.isShiftEnabled = ! Behaviors.isShiftEnabled;\n\n\tvar icon_el = Behaviors.el.shiftKey.querySelector( \"[data-type]\" );\n\tif ( Behaviors.isShiftEnabled ) {\n\n\t\ticon_el.setAttribute( \"src\", Assets.aframeKeyboardShiftActive );\n\n\t} else {\n\n\t\ticon_el.setAttribute( \"src\", Assets.aframeKeyboardShift );\n\n\t}\n\n\tfor ( let keyEl of document.querySelectorAll( \"[key-id]\" ) ) {\n\n\t\tlet key_id = keyEl.getAttribute( \"key-id\" ),\n\t\t\tkey_type = keyEl.getAttribute( \"key-type\" );\n\t\tif ( key_id.startsWith( \"main-\" ) && key_type === \"text\" ) {\n\n\t\t\tlet textEl = keyEl.querySelector( \"a-text\" );\n\t\t\tif ( textEl ) {\n\n\t\t\t\tlet value = textEl.getAttribute( \"value\" ).toLowerCase();\n\t\t\t\tif ( this.isShiftEnabled ) {\n\n\t\t\t\t\tvalue = value.toUpperCase();\n\n\t\t\t\t}\n\t\t\t\ttextEl.setAttribute( \"value\", value );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n\n// -----------------------------------------------------------------------------\n// SYMBOLS\n\nBehaviors.isSymbols = false;\nBehaviors.symbolsToggle = function () {\n\n\tBehaviors.isSymbols = ! Behaviors.isSymbols;\n\tif ( ! Behaviors.isSymbols ) {\n\n\t\tlet parent = Behaviors.el.symbolsLayout.parentNode;\n\t\tparent.removeChild( Behaviors.el.symbolsLayout );\n\t\tparent.appendChild( Behaviors.el.alphabeticalLayout );\n\n\t} else {\n\n\t\tlet parent = Behaviors.el.alphabeticalLayout.parentNode;\n\t\tparent.removeChild( Behaviors.el.alphabeticalLayout );\n\t\tparent.appendChild( Behaviors.el.symbolsLayout );\n\n\t}\n\n};\n\nmodule.exports = Behaviors;\n","( () => {\n\n\tif ( ! AFRAME ) {\n\n\t\treturn console.error( \"AFRAME is required!\" );\n\n\t}\n\tif ( ! AFRAME.ASSETS_PATH ) {\n\n\t\tAFRAME.ASSETS_PATH = \"./assets\";\n\n\t}\n\t//require( \"aframe-rounded\" );\n\t//require(\"./fade\");\n\t//require(\"./alert\"); @TODO ;)\n\trequire( \"./keyboard\" );\n\trequire( \"./input\" );\n\t//require(\"./switch\");\n\t//require(\"./slider\");\n\t//require(\"./form\");\n\t//require(\"./radio\");\n\t//require(\"./checkbox\");\n\t//require(\"./button\");\n\t//require(\"./toast\");\n\n} )();\n","const Utils = require( \"../utils\" );\nconst Draw = require( \"./draw\" );\nconst Behaviors = require( \"./behaviors\" );\nconst SFX = require( \"./sfx\" );\nconst Event = require( \"../core/event\" );\n\nAFRAME.registerComponent( \"keyboard\", {\n\tschema: {\n\t\tisOpen: { type: \"boolean\", default: false },\n\t\tphysicalKeyboard: { type: \"boolean\", default: false }\n\t},\n\tcurrentInput: null,\n\tinit: function () {\n\n\t\tlet that = this;\n\t\tconsole.error( \"keyboardInit\" );\n\t\t// SFX\n\t\t//SFX.init(this.el);\n\n\t\t// Draw\n\t\tthis.keydownEventKey = this.keydownEventKey.bind( this );\n\t\tthis.inputEvent = this.inputEvent.bind( this );\n\t\tthis.didFocusInputEventKey = this.didFocusInputEventKey.bind( this );\n\t\tthis.didBlurInputEvent = this.didBlurInputEvent.bind( this );\n\t\tthis.dismissEvent = this.dismissEvent.bind( this );\n\t\tthis.backspaceEvent = this.backspaceEvent.bind( this );\n\t\tthis.onTabNextInput = this.onTabNextInput.bind( this );\n\t\tDraw.init( this.el );\n\n\t\t// Init keyboard UI\n\t\tlet numericalUI = Draw.numericalUI(),\n\t\t\tmainUI = Draw.mainUI(),\n\t\t\tactionsUI = Draw.actionsUI();\n\n\t\t// Create layout\n\t\tthis.el.alphabeticalLayout = Draw.alphabeticalLayout();\n\t\tthis.el.symbolsLayout = Draw.symbolsLayout();\n\n\t\t// Append layouts to UI\n\t\t//numericalUI.appendChild( Draw.numericalLayout() );\n\t\tmainUI.appendChild( this.el.alphabeticalLayout );\n\t\tactionsUI.appendChild( Draw.actionsLayout() );\n\n\t\t//this.el.appendChild( numericalUI );\n\t\tthis.el.appendChild( mainUI );\n\t\tthis.el.appendChild( actionsUI );\n\n\t\t// Inject methods in elements..\n\t\tthis.el.show = function () {\n\n\t\t\tBehaviors.showKeyboard( that.el );\n\n\t\t};\n\t\tthis.el.hide = function () {\n\n\t\t\tBehaviors.hideKeyboard( that.el );\n\n\t\t};\n\t\tthis.el.open = function () {\n\n\t\t\tBehaviors.openKeyboard( that.el );\n\n\t\t};\n\t\tthis.el.dismiss = function () {\n\n\t\t\tBehaviors.dismissKeyboard( that.el );\n\n\t\t};\n\t\tthis.el.destroy = function () {\n\n\t\t\tBehaviors.destroyKeyboard( that.el );\n\n\t\t};\n\n\t\t// Set default value\n\t\tthis.el.setAttribute( \"scale\", \"1 1 1\" );\n\t\tthis.el.setAttribute( \"rotation\", \"0 0 0\" );\n\t\tthis.el.setAttribute( \"position\", \"-0.5 0.3 -1.5\" );\n\t\tthis.el.setAttribute( \"class\", \"ui\" );\n\t\t// Register keyboard events\n\t\tthis.el.addEventListener( \"input\", this.inputEvent );\n\t\tthis.el.addEventListener( \"backspace\", this.backspaceEvent );\n\t\tthis.el.addEventListener( \"dismiss\", this.dismissEvent );\n\t\tthis.el.addEventListener( \"onTabNextInput\", this.onTabNextInput );\n\t\t// Register global events\n\t\tdocument.addEventListener( \"keydown\", this.keydownEventKey );\n\t\tdocument.addEventListener( \"didfocusinput\", this.didFocusInputEventKey );\n\t\tdocument.addEventListener( \"didblurinput\", this.didBlurInputEvent );\n\n\t},\n\tupdate: function () {\n\n\t\t// document.removeEventListener(\"keydown\", this.keydownEventKey.bind(this));\n\t\tif ( this.data.isOpen ) {\n\n\t\t\tBehaviors.showKeyboard( this.el );\n\n\t\t} else {\n\n\t\t\tBehaviors.hideKeyboard( this.el );\n\n\t\t}\n\n\t},\n\ttick: function () {},\n\tremove: function () {\n\n\t\tconsole.error( \"keyboard remove\" );\n\t\tdocument.removeEventListener( \"keydown\", this.keydownEventKey );\n\n\t\tthis.el.removeEventListener( \"input\", this.inputEvent );\n\t\tthis.el.removeEventListener( \"backspace\", this.backspaceEvent );\n\t\tthis.el.removeEventListener( \"dismiss\", this.dismissEvent );\n\t\tthis.el.removeEventListener( \"onTabNextInput\", this.onTabNextInput );\n\t\tdocument.removeEventListener( \"didfocusinput\", this.didFocusInputEventKey.bind( this ) );\n\t\tdocument.removeEventListener( \"didblurinput\", this.didBlurInputEvent.bind( this ) );\n\n\t},\n\tpause: function () {\n\n\t\tdocument.removeEventListener( \"keydown\", this.keydownEventKey.bind( this ) );\n\n\t},\n\tplay: function () {},\n\n\t// Fired on keyboard key press\n\tinputEvent: function ( e ) {\n\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tif ( this.currentInput ) {\n\n\t\t\tconsole.error( e.detail );\n\t\t\tthis.currentInput.appendString( e.detail );\n\n\t\t}\n\n\t},\n\n\t// Fired on backspace key press\n\tbackspaceEvent: function ( e ) {\n\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tconsole.error( \"backspaceEvent deleteLast\" );\n\t\tif ( this.currentInput ) {\n\n\t\t\tthis.currentInput.deleteLast();\n\n\t\t}\n\n\t},\n\n\tdismissEvent: function ( e ) {\n\n\t\tif ( this.currentInput ) {\n\n\t\t\tthis.currentInput.blur();\n\n\t\t}\n\n\t},\n\n\tonTabNextInput: function ( e ) {\n\n\t\tconsole.error( this.currentInput );\n\t\tlet inputs = document.querySelectorAll( \"a-input\" );\n\t\tconsole.error( inputs );\n\t\tif ( this.currentInput ) {\n\n\t\t\tthis.currentInput.blur();\n\n\t\t}\n\t\tif ( inputs[ 1 ] ) inputs[ 1 ].focus();\n\n\t},\n\t// physical keyboard event\n\tkeydownEventKey: function ( e ) {\n\n\t\tconsole.error( e );\n\t\tconsole.error( \"keydown\" + e );\n\t\tconsole.error( \"keydown\" + e.key );\n\t\tconsole.error( \"keydown\" + this.currentInput );\n\t\tif ( this.data.physicalKeyboard) {\n\n\t\t\t// this.currentInput = e.detail\n\n\t\t\tif ( e.key === \"Enter\" ) {\n\n\t\t\t\tEvent.emit( Behaviors.el, \"input\", \"\\n\" );\n\t\t\t\tEvent.emit( Behaviors.el, \"enter\", \"\\n\" );\n\n\t\t\t} else if ( e.key === \"Backspace\" ) {\n\n\t\t\t\tEvent.emit( Behaviors.el, \"backspace\" );\n\n\t\t\t} else if ( e.key === \"Escape\" ) {\n\t\t\t\t// Event.emit(Behaviors.el, \"dismiss\");\n\t\t\t} else if ( e.key === \"Tab\" ) {\n\n\t\t\t\tEvent.emit( Behaviors.el, \"onTabNextInput\" );\n\n\t\t\t} else if ( e.key.length < 2 ) {\n\n\t\t\t\tEvent.emit( Behaviors.el, \"input\", e.key );\n\n\t\t\t}\n\t\t\te = null;\n\n\t\t}\n\n\t},\n\n\t// Fired when an input has been selected\n\tdidFocusInputEventKey: function ( e ) {\n\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tconsole.error( \"didFocusInputKey\" );\n\t\tconsole.error( e );\n\t\tif ( this.currentInput ) {\n\n\t\t\tthis.currentInput.blur( true );\n\n\t\t}\n\t\tthis.currentInput = e.detail;\n\t\tif ( ! this.el.isOpen ) {\n\t\t\t//Behaviors.openKeyboard(this.el);\n\t\t}\n\t\te = null;\n\n\t},\n\n\t// Fired when an input has been deselected\n\tdidBlurInputEvent: function ( e ) {\n\n\t\tthis.currentInput = null;\n\t\tBehaviors.dismissKeyboard( this.el );\n\n\t}\n} );\n\nAFRAME.registerPrimitive( \"a-keyboard\", {\n\tdefaultComponents: {\n\t\tkeyboard: {}\n\t},\n\tmappings: {\n\t\t\"is-open\": \"keyboard.isOpen\",\n\t\t\"physical-keyboard\": \"keyboard.physicalKeyboard\"\n\t}\n} );\n","const Assets = require( \"./assets\" );\nconst Layouts = require( \"./layouts\" );\nconst Config = require( \"./config\" );\nconst Behaviors = require( \"./behaviors\" );\nconst Draw = {};\n\nDraw.el = null;\n\nDraw.init = el => {\n\n\tDraw.el = el;\n\tBehaviors.el = el;\n\tBehaviors.SFX = el.SFX;\n\n};\n\n// -----------------------------------------------------------------------------\n// DRAW NUMERICAL UI\n\nDraw.numericalUI = () => {\n\n\tvar wrapper = document.createElement( \"a-entity\" );\n\twrapper.setAttribute( \"position\", \"0.025 0 0.12\" );\n\twrapper.setAttribute( \"rotation\", \"0 0 0\" );\n\twrapper.setAttribute( \"data-ui\", true );\n\twrapper.setAttribute( \"class\", \"ui\" );\n\tvar el = document.createElement( \"a-rounded\" );\n\tel.setAttribute( \"width\", \"0.280\" );\n\tel.setAttribute( \"height\", \"0.360\" );\n\tel.setAttribute( \"radius\", \"0.02\" );\n\tel.setAttribute( \"color\", Config.KEYBOARD_COLOR );\n\tel.setAttribute( \"class\", \"ui\" );\n\t//wrapper.appendChild(el);\n\n\treturn wrapper;\n\n};\n\n// -----------------------------------------------------------------------------\n// DRAW MAIN UI\n\nDraw.mainUI = () => {\n\n\tvar wrapper = document.createElement( \"a-entity\" );\n\twrapper.setAttribute( \"position\", \"-0.3 0 0\" );\n\twrapper.setAttribute( \"data-ui\", true );\n\twrapper.setAttribute( \"class\", \"ui\" );\n\tvar el = document.createElement( \"a-rounded\" );\n\tel.setAttribute( \"width\", \"0.840\" );\n\tel.setAttribute( \"height\", \"0.360\" );\n\tel.setAttribute( \"radius\", \"0.02\" );\n\tel.setAttribute( \"color\", Config.KEYBOARD_COLOR );\n\tel.setAttribute( \"class\", \"ui\" );\n\t//wrapper.appendChild(el);\n\n\treturn wrapper;\n\n};\n\n// -----------------------------------------------------------------------------\n// DRAW ACTION UI\n\nDraw.actionsUI = () => {\n\n\tvar wrapper = document.createElement( \"a-entity\" );\n\twrapper.setAttribute( \"position\", \"0.55 0 0\" );\n\twrapper.setAttribute( \"rotation\", \"0 0 0\" );\n\twrapper.setAttribute( \"data-ui\", true );\n\twrapper.setAttribute( \"class\", \"ui\" );\n\tvar el = document.createElement( \"a-rounded\" );\n\tel.setAttribute( \"width\", \"0.180\" );\n\tel.setAttribute( \"height\", \"0.360\" );\n\tel.setAttribute( \"radius\", \"0.02\" );\n\tel.setAttribute( \"color\", Config.KEYBOARD_COLOR );\n\tel.setAttribute( \"class\", \"ui\" );\n\t//wrapper.appendChild(el);\n\n\treturn wrapper;\n\n};\n\n// -----------------------------------------------------------------------------\n// DRAW NUMERICAL LAYOUT\n\nDraw.numericalLayout = () => {\n\n\tvar data = Layouts.numerical;\n\tvar wrapper = document.createElement( \"a-entity\" );\n\twrapper.setAttribute( \"position\", \"0.02 0.26 0\" );\n\n\tlet index_y = 0;\n\tfor ( var i in data ) {\n\n\t\tlet key_id = \"num-\" + i;\n\t\tlet key = Draw.key( key_id, data[ i ].type, data[ i ].value );\n\t\tlet index_x = i % 3;\n\t\tlet x = Config.KEY_WIDTH * index_x;\n\t\tlet y = Config.KEY_WIDTH * index_y;\n\t\tkey.setAttribute( \"position\", `${x} -${y} 0` );\n\t\tif ( index_x === 2 ) {\n\n\t\t\tindex_y ++;\n\n\t\t}\n\t\tkey.setAttribute( \"class\", \"ui\" );\n\t\twrapper.appendChild( key );\n\n\t}\n\n\treturn wrapper;\n\n};\n\n// -----------------------------------------------------------------------------\n// DRAW ALPHABETICAL LAYOUT\n\nDraw.alphabeticalLayout = () => {\n\n\tvar data = Layouts.alphabetical;\n\tvar wrapper = document.createElement( \"a-entity\" );\n\twrapper.setAttribute( \"position\", \"0.02 0.26 0\" );\n\n\tlet index_y = 0,\n\t\tindex_x = 0,\n\t\tprev_was_space = false;\n\n\tfor ( var i in data ) {\n\n\t\tlet key_id = \"main-\" + i;\n\t\tlet key = Draw.key( key_id, data[ i ].type, data[ i ].value );\n\n\t\tlet x = Config.KEY_WIDTH * index_x;\n\t\tlet y = Config.KEY_WIDTH * index_y;\n\n\t\t// Add left padding on the second line\n\t\tif ( index_y === 1 ) {\n\n\t\t\tx = x + Config.KEY_WIDTH / 2;\n\n\t\t}\n\n\t\t// Add margin on the key next to the spacebar key\n\t\tif ( prev_was_space ) {\n\n\t\t\tx = x + Config.SPACE_KEY_WIDTH - Config.KEY_WIDTH + 0.055 * 2;\n\n\t\t}\n\n\t\t// Add margin to the spacebar key\n\t\tif ( data[ i ].type === \"spacebar\" ) {\n\n\t\t\tprev_was_space = true;\n\t\t\tx = x + 0.055;\n\t\t\ty = Config.KEY_WIDTH * index_y - 0.01;\n\n\t\t}\n\n\t\tkey.setAttribute( \"position\", `${x} -${y} 0` );\n\n\t\tif ( index_y === 1 && index_x === 8 ) {\n\n\t\t\tindex_x = - 1;\n\t\t\tindex_y ++;\n\n\t\t} else if ( index_x === 9 ) {\n\n\t\t\tindex_x = - 1;\n\t\t\tindex_y ++;\n\n\t\t}\n\t\tindex_x ++;\n\t\tkey.setAttribute( \"class\", \"ui\" );\n\t\twrapper.appendChild( key );\n\n\t}\n\n\treturn wrapper;\n\n};\n\n// -----------------------------------------------------------------------------\n// DRAW SYMBOLS LAYOUT\n\nDraw.symbolsLayout = () => {\n\n\tvar data = Layouts.symbols;\n\tvar wrapper = document.createElement( \"a-entity\" );\n\twrapper.setAttribute( \"position\", \"0.02 0.26 0\" );\n\n\tlet index_y = 0,\n\t\tindex_x = 0,\n\t\tprev_was_space = false;\n\n\tfor ( var i in data ) {\n\n\t\tlet key_id = \"symbols-\" + i;\n\t\tlet key = Draw.key( key_id, data[ i ].type, data[ i ].value );\n\t\tlet x = Config.KEY_WIDTH * index_x;\n\t\tlet y = Config.KEY_WIDTH * index_y;\n\n\t\t// Add margin on the key next to the spacebar key\n\t\tif ( prev_was_space ) {\n\n\t\t\tx = x + Config.SPACE_KEY_WIDTH - Config.KEY_WIDTH + 0.055 * 2;\n\n\t\t}\n\n\t\t// Add margin to the spacebar key\n\t\tif ( data[ i ].type === \"spacebar\" ) {\n\n\t\t\tprev_was_space = true;\n\t\t\tx = x + 0.055;\n\t\t\ty = Config.KEY_WIDTH * index_y - 0.01;\n\n\t\t}\n\n\t\tkey.setAttribute( \"position\", `${x} -${y} 0` );\n\n\t\tif ( index_x === 9 ) {\n\n\t\t\tindex_x = - 1;\n\t\t\tindex_y ++;\n\n\t\t}\n\t\tindex_x ++;\n\t\tkey.setAttribute( \"class\", \"ui\" );\n\t\twrapper.appendChild( key );\n\n\t}\n\n\treturn wrapper;\n\n};\n\n// -----------------------------------------------------------------------------\n// DRAW ACTIONS LAYOUT\n\nDraw.actionsLayout = () => {\n\n\tvar data = Layouts.actions;\n\tvar wrapper = document.createElement( \"a-entity\" );\n\twrapper.setAttribute( \"position\", \"0.02 0.26 0\" );\n\n\tlet val_y = 0;\n\tfor ( var i in data ) {\n\n\t\tlet key_id = \"action-\" + i;\n\t\tlet key = Draw.key( key_id, data[ i ].type, data[ i ].value );\n\n\t\tkey.setAttribute( \"position\", `0 -${val_y} 0` );\n\t\tif ( i == 0 ) {\n\n\t\t\tval_y += Config.ACTION_WIDTH + 0.01;\n\n\t\t} else if ( i == 1 ) {\n\n\t\t\tval_y += Config.KEY_WIDTH + 0.01;\n\n\t\t}\n\t\tkey.setAttribute( \"class\", \"ui\" );\n\t\twrapper.appendChild( key );\n\n\t}\n\n\treturn wrapper;\n\n};\n\n// -----------------------------------------------------------------------------\n// DRAW KEY\n\nDraw.key = ( id, type, value ) => {\n\n\tvar that = this;\n\n\tvar el = document.createElement( \"a-rounded\" );\n\tel.setAttribute( \"key-id\", id );\n\tel.setAttribute( \"width\", Config.KEY_WIDTH );\n\tel.setAttribute( \"height\", Config.KEY_WIDTH );\n\tel.setAttribute( \"radius\", \"0.008\" );\n\tel.setAttribute( \"position\", \"0 0 0\" );\n\tel.setAttribute( \"key-type\", type );\n\tel.setAttribute( \"key-value\", value );\n\tel.setAttribute( \"color\", Config.KEYBOARD_COLOR );\n\n\t// ---------------------------------------------------------------------------\n\t// EVENTS\n\n\tBehaviors.addKeyEvents( el );\n\n\t// ---------------------------------------------------------------------------\n\t// SHADOW\n\n\tel.shadow_el = document.createElement( \"a-image\" );\n\tel.shadow_el.setAttribute( \"width\", Config.KEY_WIDTH * 1.25 );\n\tel.shadow_el.setAttribute( \"height\", Config.KEY_WIDTH * 1.25 );\n\tel.shadow_el.setAttribute( \"position\", Config.KEY_WIDTH / 2 + \" \" + Config.KEY_WIDTH / 2 + \" -0.002\" );\n\tel.shadow_el.setAttribute( \"src\", Assets.aframeKeyboardShadow );\n\tel.appendChild( el.shadow_el );\n\n\t// ---------------------------------------------------------------------------\n\t// TEXT KEY\n\n\tif ( type === \"text\" || type === \"spacebar\" || type === \"symbol\" ) {\n\n\t\tvar letter_el = document.createElement( \"a-text\" );\n\t\tletter_el.setAttribute( \"value\", value );\n\t\tletter_el.setAttribute( \"color\", \"#dbddde\" );\n\t\tletter_el.setAttribute( \"position\", Config.KEY_WIDTH / 2 + \" \" + Config.KEY_WIDTH / 2 + \" 0.01\" );\n\t\tletter_el.setAttribute( \"scale\", \"0.16 0.16 0.16\" );\n\t\tletter_el.setAttribute( \"align\", \"center\" );\n\t\tletter_el.setAttribute( \"baseline\", \"center\" );\n\t\tel.appendChild( letter_el );\n\n\t}\n\n\t// ---------------------------------------------------------------------------\n\t// SPACEBAR KEY\n\n\tif ( type === \"spacebar\" ) {\n\n\t\tel.setAttribute( \"width\", Config.SPACE_KEY_WIDTH );\n\t\tel.setAttribute( \"height\", Config.SPACE_KEY_HEIGHT );\n\t\tel.setAttribute( \"color\", \"#404b50\" );\n\t\tel.shadow_el.setAttribute( \"width\", Config.SPACE_KEY_WIDTH * 1.12 );\n\t\tel.shadow_el.setAttribute( \"height\", Config.SPACE_KEY_HEIGHT * 1.2 );\n\t\tel.shadow_el.setAttribute( \"position\", Config.SPACE_KEY_WIDTH / 2 + \" \" + Config.SPACE_KEY_HEIGHT / 2 + \" -0.02\" );\n\t\tletter_el.setAttribute( \"color\", \"#adb1b3\" );\n\t\tletter_el.setAttribute( \"scale\", \"0.12 0.12 0.12\" );\n\t\tletter_el.setAttribute( \"position\", Config.SPACE_KEY_WIDTH / 2 + \" \" + Config.SPACE_KEY_HEIGHT / 2 + \" 0\" );\n\n\t}\n\n\t// ---------------------------------------------------------------------------\n\t// SYMBOL KEY\n\telse if ( type === \"symbol\" ) {\n\n\t\tletter_el.setAttribute( \"scale\", \"0.12 0.12 0.12\" );\n\n\t}\n\n\t// ---------------------------------------------------------------------------\n\t// ACTION KEY\n\n\tif ( type === \"backspace\" || type === \"enter\" || type === \"dismiss\" ) {\n\n\t\tel.setAttribute( \"width\", Config.ACTION_WIDTH );\n\t\tel.shadow_el.setAttribute( \"width\", Config.ACTION_WIDTH * 1.25 );\n\t\tel.shadow_el.setAttribute( \"position\", Config.ACTION_WIDTH / 2 + \" \" + Config.KEY_WIDTH / 2 + \" -0.02\" );\n\n\t}\n\n\t// ---------------------------------------------------------------------------\n\t// SHIFT KEY\n\n\tif ( type === \"shift\" ) {\n\n\t\tvar icon_el = document.createElement( \"a-image\" );\n\t\ticon_el.setAttribute( \"data-type\", \"icon\" );\n\t\ticon_el.setAttribute( \"width\", \"0.032\" );\n\t\ticon_el.setAttribute( \"height\", \"0.032\" );\n\t\ticon_el.setAttribute( \"position\", \"0.04 0.04 0.01\" );\n\t\ticon_el.setAttribute( \"src\", Assets.aframeKeyboardShift );\n\t\tel.appendChild( icon_el );\n\t\tDraw.el.shiftKey = el;\n\n\t}\n\n\t// ---------------------------------------------------------------------------\n\t// GLOBAL\n\telse if ( type === \"global\" ) {\n\n\t\tvar icon_el = document.createElement( \"a-image\" );\n\t\ticon_el.setAttribute( \"width\", \"0.032\" );\n\t\ticon_el.setAttribute( \"height\", \"0.032\" );\n\t\ticon_el.setAttribute( \"position\", \"0.04 0.04 0.01\" );\n\t\ticon_el.setAttribute( \"src\", Assets.aframeKeyboardGlobal );\n\t\tel.appendChild( icon_el );\n\n\t}\n\n\t// ---------------------------------------------------------------------------\n\t// BACKSPACE\n\telse if ( type === \"backspace\" ) {\n\n\t\tvar icon_el = document.createElement( \"a-image\" );\n\t\ticon_el.setAttribute( \"width\", \"0.046\" );\n\t\ticon_el.setAttribute( \"height\", \"0.046\" );\n\t\ticon_el.setAttribute( \"position\", \"0.07 0.04 0.01\" );\n\t\ticon_el.setAttribute( \"src\", Assets.aframeKeyboardBackspace );\n\t\tel.appendChild( icon_el );\n\n\t}\n\n\t// ---------------------------------------------------------------------------\n\t// ENTER\n\telse if ( type === \"enter\" ) {\n\n\t\tel.setAttribute( \"height\", Config.ACTION_WIDTH );\n\t\tel.shadow_el.setAttribute( \"height\", Config.ACTION_WIDTH * 1.25 );\n\t\tel.shadow_el.setAttribute( \"position\", Config.ACTION_WIDTH / 2 + \" \" + Config.ACTION_WIDTH / 2 + \" -0.02\" );\n\n\t\tvar circle_el = document.createElement( \"a-circle\" );\n\t\tcircle_el.setAttribute( \"color\", \"#4285f4\" );\n\t\tcircle_el.setAttribute( \"radius\", 0.044 );\n\t\tcircle_el.setAttribute( \"position\", \"0.07 0.07 0.01\" );\n\t\tel.appendChild( circle_el );\n\n\t\tvar icon_el = document.createElement( \"a-image\" );\n\t\ticon_el.setAttribute( \"width\", \"0.034\" );\n\t\ticon_el.setAttribute( \"height\", \"0.034\" );\n\t\ticon_el.setAttribute( \"position\", \"0.07 0.07 0.011\" );\n\t\ticon_el.setAttribute( \"src\", Assets.aframeKeyboardEnter );\n\t\tel.appendChild( icon_el );\n\n\t}\n\n\t// ---------------------------------------------------------------------------\n\t// DISMISS\n\telse if ( type === \"dismiss\" ) {\n\n\t\tvar icon_el = document.createElement( \"a-image\" );\n\t\ticon_el.setAttribute( \"width\", \"0.046\" );\n\t\ticon_el.setAttribute( \"height\", \"0.046\" );\n\t\ticon_el.setAttribute( \"position\", \"0.07 0.04 0.01\" );\n\t\ticon_el.setAttribute( \"src\", Assets.aframeKeyboardDismiss );\n\t\tel.appendChild( icon_el );\n\n\t}\n\n\treturn el;\n\n};\n\nmodule.exports = Draw;\n","const Layouts = {\n\tnumerical: [\n\t\t{ type: \"text\", value: \"1\" },\n\t\t{ type: \"text\", value: \"2\" },\n\t\t{ type: \"text\", value: \"3\" },\n\t\t{ type: \"text\", value: \"4\" },\n\t\t{ type: \"text\", value: \"5\" },\n\t\t{ type: \"text\", value: \"6\" },\n\t\t{ type: \"text\", value: \"7\" },\n\t\t{ type: \"text\", value: \"8\" },\n\t\t{ type: \"text\", value: \"9\" },\n\t\t{ type: \"text\", value: \".\" },\n\t\t{ type: \"text\", value: \"0\" },\n\t\t{ type: \"text\", value: \"-\" }\n\t],\n\n\talphabetical: [\n\t\t{ type: \"text\", value: \"q\" },\n\t\t{ type: \"text\", value: \"w\" },\n\t\t{ type: \"text\", value: \"e\" },\n\t\t{ type: \"text\", value: \"r\" },\n\t\t{ type: \"text\", value: \"t\" },\n\t\t{ type: \"text\", value: \"y\" },\n\t\t{ type: \"text\", value: \"u\" },\n\t\t{ type: \"text\", value: \"i\" },\n\t\t{ type: \"text\", value: \"o\" },\n\t\t{ type: \"text\", value: \"p\" },\n\n\t\t{ type: \"text\", value: \"a\" },\n\t\t{ type: \"text\", value: \"s\" },\n\t\t{ type: \"text\", value: \"d\" },\n\t\t{ type: \"text\", value: \"f\" },\n\t\t{ type: \"text\", value: \"g\" },\n\t\t{ type: \"text\", value: \"h\" },\n\t\t{ type: \"text\", value: \"j\" },\n\t\t{ type: \"text\", value: \"k\" },\n\t\t{ type: \"text\", value: \"l\" },\n\n\t\t{ type: \"shift\" },\n\t\t{ type: \"text\", value: \"z\" },\n\t\t{ type: \"text\", value: \"x\" },\n\t\t{ type: \"text\", value: \"c\" },\n\t\t{ type: \"text\", value: \"v\" },\n\t\t{ type: \"text\", value: \"b\" },\n\t\t{ type: \"text\", value: \"n\" },\n\t\t{ type: \"text\", value: \"m\" },\n\t\t{ type: \"text\", value: \"!\" },\n\t\t{ type: \"text\", value: \"?\" },\n\n\t\t//   { type: 'symbol', value: '#+='},\n\t\t{ type: \"text\", value: \"@\" },\n\t\t{ type: \"spacebar\", value: \"\" },\n\t\t{ type: \"text\", value: \",\" },\n\t\t{ type: \"text\", value: \".\" }\n\t],\n\n\tsymbols: [\n\t\t{ type: \"text\", value: \"@\" },\n\t\t{ type: \"text\", value: \"#\" },\n\t\t{ type: \"text\", value: \"$\" },\n\t\t{ type: \"text\", value: \"%\" },\n\t\t{ type: \"text\", value: \"&\" },\n\t\t{ type: \"text\", value: \"*\" },\n\t\t{ type: \"text\", value: \"-\" },\n\t\t{ type: \"text\", value: \"+\" },\n\t\t{ type: \"text\", value: \"(\" },\n\t\t{ type: \"text\", value: \")\" },\n\n\t\t{ type: \"text\", value: \"~\" },\n\t\t{ type: \"text\", value: \"`\" },\n\t\t{ type: \"text\", value: '\"' },\n\t\t{ type: \"text\", value: \"'\" },\n\t\t{ type: \"text\", value: \":\" },\n\t\t{ type: \"text\", value: \";\" },\n\t\t{ type: \"text\", value: \"_\" },\n\t\t{ type: \"text\", value: \"=\" },\n\t\t{ type: \"text\", value: \"\\\\\" },\n\t\t{ type: \"text\", value: \"/\" },\n\n\t\t{ type: \"text\", value: \"{\" },\n\t\t{ type: \"text\", value: \"}\" },\n\t\t{ type: \"text\", value: \"[\" },\n\t\t{ type: \"text\", value: \"]\" },\n\t\t{ type: \"text\", value: \"<\" },\n\t\t{ type: \"text\", value: \">\" },\n\t\t{ type: \"text\", value: \"^\" },\n\t\t{ type: \"text\", value: \"|\" },\n\t\t{ type: \"text\", value: \"!\" },\n\t\t{ type: \"text\", value: \"?\" },\n\n\t\t{ type: \"symbol\", value: \"ABC\" },\n\t\t{ type: \"text\", value: \"@\" },\n\t\t{ type: \"spacebar\", value: \"\" },\n\t\t{ type: \"text\", value: \",\" },\n\t\t{ type: \"text\", value: \".\" }\n\t],\n\n\tactions: [\n\t\t{ type: \"backspace\", value: \"Del\" },\n\t\t{ type: \"enter\", value: \"OK\" }\n\t]\n};\n\nmodule.exports = Layouts;\n","var Assets = require( \"./assets\" );\n\nconst SFX = {\n\tinit: function ( parent ) {\n\n\t\tlet el = document.createElement( \"a-sound\" );\n\t\tel.setAttribute( \"key\", \"aframeKeyboardKeyInSound\" );\n\t\tel.setAttribute( \"sfx\", true );\n\t\tel.setAttribute( \"src\", Assets.aframeKeyboardKeyIn );\n\t\tel.setAttribute( \"position\", \"0 2 5\" );\n\t\tparent.appendChild( el );\n\n\t\tel = document.createElement( \"a-sound\" );\n\t\tel.setAttribute( \"key\", \"aframeKeyboardKeyDownSound\" );\n\t\tel.setAttribute( \"sfx\", true );\n\t\tel.setAttribute( \"src\", Assets.aframeKeyboardKeyDown );\n\t\tel.setAttribute( \"position\", \"0 2 5\" );\n\t\tparent.appendChild( el );\n\n\t},\n\n\tkeyIn: function ( parent ) {\n\n\t\tlet el = parent.querySelector( \"[key=aframeKeyboardKeyInSound]\" );\n\t\tif ( ! el ) {\n\n\t\t\treturn;\n\n\t\t}\n\t\tel.components.sound.stopSound();\n\t\tel.components.sound.playSound();\n\n\t},\n\n\tkeyDown: function ( parent ) {\n\n\t\tlet el = parent.querySelector( \"[key=aframeKeyboardKeyDownSound]\" );\n\t\tif ( ! el ) {\n\n\t\t\treturn;\n\n\t\t}\n\t\tel.components.sound.stopSound();\n\t\tel.components.sound.playSound();\n\n\t}\n};\n\nmodule.exports = SFX;\n","const Utils = require( \"../utils\" );\nconst Event = require( \"../core/event\" );\n\n/*\n@BUG: Space has not effect when no letter comes after.\n@TODO: <progress value=\"70\" max=\"100\">70 %</progress>\n*/\n\nAFRAME.registerComponent( \"input\", {\n\tschema: {\n\t\tvalue: { type: \"string\", default: \"\" },\n\t\tname: { type: \"string\", default: \"\" },\n\t\tdisabled: { type: \"boolean\", default: false },\n\t\tcolor: { type: \"color\", default: \"#fff\" },\n\t\talign: { type: \"string\", default: \"left\" },\n\t\tfont: { type: \"string\", default: \"\" },\n\t\tletterSpacing: { type: \"int\", default: 0 },\n\t\tlineHeight: { type: \"string\", default: \"\" },\n\t\topacity: { type: \"number\", default: 0 },\n\t\tside: { type: \"string\", default: \"front\" },\n\t\ttabSize: { type: \"int\", default: 4 },\n\t\tplaceholder: { type: \"string\", default: \"\" },\n\t\tplaceholderColor: { type: \"color\", default: \"#AAA\" },\n\t\tmaxLength: { type: \"int\", default: 0 },\n\t\ttype: { type: \"string\", default: \"text\" },\n\t\twidth: { type: \"number\", default: 1 },\n\t\tcursorWidth: { type: \"number\", default: 0.01 },\n\t\tcursorHeight: { type: \"number\", default: 0.08 },\n\t\tcursorColor: { type: \"color\", default: \"#007AFF\" },\n\t\tbackgroundColor: { type: \"color\", default: \"#fff\" },\n\t\tbackgroundOpacity: { type: \"number\", default: 0 }\n\t},\n\n\tinit: function () {\n\n\t\n\t\tlet that = this;\n\n\t\tthis.background = document.createElement( \"a-plane\" );\n\t\n\t\tthis.background.setAttribute( \"height\", 0.18 );\n\t\tthis.background.setAttribute( \"position\", \"0.5 0 0\" );\n\t\tthis.background.setAttribute( \"side\", \"double\" );\n\t\tthis.background.setAttribute( \"class\", \"ui\" );\n\t\tthis.el.appendChild( this.background );\n\n\t\tthis.cursor = document.createElement( \"a-plane\" );\n\t\tthis.cursor.setAttribute( \"position\", \"0 0 0.003\" );\n\t\tthis.cursor.setAttribute( \"visible\", false );\n\t\tthis.cursor.setAttribute( \"class\", \"ui\" );\n\t\tthis.el.appendChild( this.cursor );\n\n\t\tthis.text = document.createElement( \"a-entity\" );\n\t\tthis.el.appendChild( this.text );\n\n\t\tthis.placeholder = document.createElement( \"a-entity\" );\n\t\tthis.placeholder.setAttribute( \"visible\", false );\n\t\tthis.el.appendChild( this.placeholder );\n\n\t\tthis.el.focus = this.focus.bind( this );\n\t\tthis.el.blur = this.blur.bind( this );\n\t\tthis.el.appendString = this.appendString.bind( this );\n\t\tthis.el.setString = this.setString.bind( this );\n\t\tthis.el.deleteLast = this.deleteLast.bind( this );\n\n\t\t//setTimeout(function() { that.updateText(); }, 0);\n\t\tthis.blink();\n\t\tthis.background.addEventListener( \"mousedown\", e => {\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tconsole.error( this.data );\n\t\t\tif ( this.data.disabled ) {\n\n\t\t\t\tthis.blur();\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tthat.focus();\n\n\t\t} );\n\n\t\t/* this.text.addEventListener(\"mousedown\", function() {\n      console.error(this.data);\n      if (this.data.disabled) {\n        this.blur();\n        return;\n      }\n      that.focus();\n    });\n\n    this.placeholder.addEventListener(\"mousedown\", function() {\n      console.error(this.data);\n      if (this.data.disabled) {\n        this.blur();\n        return;\n      }\n      that.focus();\n    });\n*/\n\t\tObject.defineProperty( this.el, \"value\", {\n\t\t\tget: function () {\n\n\t\t\t\treturn this.getAttribute( \"value\" );\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.setAttribute( \"value\", value );\n\n\t\t\t},\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true\n\t\t} );\n\n\t},\n\tplay: function () {\n\n\t\tconsole.error( \"input play\" );\n\n\t},\n\tpause: function () {\n\n\t\tconsole.error( \"input pause\" );\n\n\t},\n\tblink: function () {\n\n\t\tlet that = this;\n\t\tif ( ! this.isFocused ) {\n\n\t\t\tthis.cursor.setAttribute( \"visible\", false );\n\t\t\tclearInterval( this.cursorInterval );\n\t\t\tthis.cursorInterval = null;\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.cursorInterval = setInterval( function () {\n\n\t\t\tthat.cursor.setAttribute( \"visible\", ! that.cursor.getAttribute( \"visible\" ) );\n\n\t\t}, 500 );\n\n\t},\n\tisFocused: false,\n\tfocus: function ( noemit ) {\n\n\t\tif ( this.isFocused ) {\n\n\t\t\treturn;\n\n\t\t}\n\t\tconsole.error( \"focus\" );\n\n\t\tthis.isFocused = true;\n\t\tthis.cursor.setAttribute( \"visible\", true );\n\t\tthis.blink();\n\n\t\tEvent.emit( this.el, \"focus\" );\n\t\tif ( ! noemit ) {\n\n\t\t\tEvent.emit( document, \"didfocusinput\", this.el );\n\n\t\t}\n\n\t\t// noemit = false;\n\n\t},\n\tblur: function ( noemit ) {\n\n\t\tconsole.error( \"blur\" );\n\t\tif ( ! this.isFocused ) {\n\n\t\t\treturn;\n\n\t\t}\n\t\tthis.isFocused = false;\n\t\tif ( this.cursorInterval ) {\n\n\t\t\tclearInterval( this.cursorInterval );\n\t\t\tthis.cursorInterval = null;\n\n\t\t}\n\t\tthis.cursor.setAttribute( \"visible\", false );\n\t\tEvent.emit( this.el, \"didblurinput\" );\n\t\tif ( ! noemit ) {\n\n\t\t\tEvent.emit( document, \"didblurinput\", this.el );\n\n\t\t}\n\n\t},\n\tappendString: function ( data ) {\n\n\t\tif ( data === \"\\n\" ) {\n\n\t\t\treturn this.blur();\n\n\t\t}\n\t\tlet str = this.el.getAttribute( \"value\" );\n\t\tif ( ! str ) {\n\n\t\t\tstr = \"\";\n\n\t\t}\n\t\tstr = str + data;\n\t\tthis.el.setAttribute( \"value\", str );\n\t\tEvent.emit( this.el, \"change\", str );\n\n\t},\n\tsetString: function ( data ) {\n\n\t\tlet str = this.el.getAttribute( \"value\" );\n\t\tif ( ! str ) {\n\n\t\t\tstr = \"\";\n\n\t\t}\n\t\tstr = data;\n\t\tthis.el.setAttribute( \"value\", str );\n\t\tEvent.emit( this.el, \"change\", str );\n\n\t},\n\tdeleteLast: function () {\n\n\t\tlet str = this.el.getAttribute( \"value\" );\n\t\tif ( ! str ) {\n\n\t\t\tstr = \"\";\n\n\t\t}\n\t\tstr = str.slice( 0, - 1 );\n\t\tthis.el.setAttribute( \"value\", str );\n\t\tEvent.emit( this.el, \"change\", str );\n\n\t},\n\tupdateText: function () {\n\n\t\tlet that = this;\n\t\tlet padding = {\n\t\t\tleft: 0.021,\n\t\t\tright: 0.021\n\t\t};\n\n\t\tlet props = {\n\t\t\tcolor: this.data.color,\n\t\t\talign: this.data.align,\n\t\t\tside: this.data.side,\n\t\t\ttabSize: this.data.tabSize,\n\t\t\twrapCount: 24 * this.data.width,\n\t\t\twidth: this.data.width\n\t\t};\n\n\t\t// Make cursor stop blinking when typing..\n\t\t// (and blinking again after typing stop).\n\t\tlet attr = this.text.getAttribute( \"text\" );\n\t\tif ( attr ) {\n\n\t\t\tif ( this.data.value !== attr.value ) {\n\n\t\t\t\tif ( this.cursorInterval ) {\n\n\t\t\t\t\tclearInterval( this.cursorInterval );\n\t\t\t\t\tthis.cursorInterval = null;\n\n\t\t\t\t}\n\t\t\t\tif ( this.cursorTimer ) {\n\n\t\t\t\t\tclearTimeout( this.cursorTimer );\n\t\t\t\t\tthis.cursorTimer = null;\n\n\t\t\t\t}\n\t\t\t\tthis.cursor.setAttribute( \"visible\", true );\n\t\t\t\tthis.cursorTimer = setTimeout( function () {\n\n\t\t\t\t\tthat.blink();\n\n\t\t\t\t}, 50 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Max length\n\t\tif ( this.data.maxLength ) {\n\n\t\t\tprops.value = this.data.value.substring( 0, this.data.maxLength );\n\t\t\tthis.el.setAttribute( \"value\", props.value );\n\n\t\t} else {\n\n\t\t\tprops.value = this.data.value;\n\n\t\t}\n\n\t\tif ( this.data.type === \"password\" ) {\n\n\t\t\tprops.value = \"*\".repeat( this.data.value.length );\n\n\t\t}\n\n\t\tif ( this.data.font.length ) {\n\n\t\t\tprops.font = this.data.font;\n\n\t\t}\n\t\tif ( this.data.letterSpacing ) {\n\n\t\t\tprops.letterSpacing = this.data.letterSpacing;\n\n\t\t}\n\t\tif ( this.data.lineHeight.length ) {\n\n\t\t\tprops.lineHeight = this.data.lineHeight;\n\n\t\t}\n\t\tthis.text.setAttribute( \"visible\", false );\n\t\tthis.text.setAttribute( \"text\", props );\n\n\t\tfunction getTextWidth( el, data, trimFirst, _widthFactor ) {\n\n\t\t\tif ( ! el.object3D || ! el.object3D.children || ! el.object3D.children[ 0 ] ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\t\t\tlet v = el.object3D.children[ 0 ].geometry.visibleGlyphs;\n\t\t\tif ( ! v ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\t\t\tv = v[ v.length - 1 ];\n\t\t\tif ( ! v ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\t\t\tif ( v.line ) {\n\n\t\t\t\tif ( trimFirst ) {\n\n\t\t\t\t\tdata.value = data.value.substr( 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdata.value = data.value.slice( 0, - 1 );\n\n\t\t\t\t}\n\t\t\t\tel.setAttribute( \"text\", data );\n\t\t\t\treturn getTextWidth( el, data, trimFirst );\n\n\t\t\t} else {\n\n\t\t\t\tif ( ! _widthFactor ) {\n\n\t\t\t\t\t_widthFactor = Utils.getWidthFactor( el, data.wrapCount );\n\n\t\t\t\t}\n\t\t\t\tv = ( v.position[ 0 ] + v.data.width ) / ( _widthFactor / that.data.width );\n\t\t\t\tlet textRatio = ( v + padding.left + padding.right ) / that.data.width;\n\n\t\t\t\tif ( textRatio > 1 ) {\n\n\t\t\t\t\tif ( trimFirst ) {\n\n\t\t\t\t\t\tdata.value = data.value.substr( 1 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdata.value = data.value.slice( 0, - 1 );\n\n\t\t\t\t\t}\n\t\t\t\t\tel.setAttribute( \"text\", data );\n\t\t\t\t\treturn getTextWidth( el, data, trimFirst, _widthFactor );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\treturn v;\n\n\t\t}\n\n\t\tif ( props.value.length ) {\n\n\t\t\tthis.placeholder.setAttribute( \"visible\", false );\n\n\t\t} else {\n\n\t\t\tthis.placeholder.setAttribute( \"visible\", true );\n\n\t\t}\n\n\t\tlet placeholder_props = Utils.clone( props );\n\t\tplaceholder_props.value = this.data.placeholder;\n\t\tplaceholder_props.color = this.data.placeholderColor;\n\t\tthis.placeholder.setAttribute( \"text\", placeholder_props );\n\n\t\tsetTimeout( function () {\n\n\t\t\tif ( that.text.object3D ) {\n\n\t\t\t\tlet children = that.text.object3D.children;\n\t\t\t\tif ( children[ 0 ] && children[ 0 ].geometry && children[ 0 ].geometry.visibleGlyphs ) {\n\n\t\t\t\t\tlet v = 0;\n\t\t\t\t\tif ( children[ 0 ].geometry.visibleGlyphs.length ) {\n\n\t\t\t\t\t\tv = getTextWidth( that.text, props, true );\n\t\t\t\t\t\tthat.text.setAttribute( \"visible\", true );\n\n\t\t\t\t\t}\n\t\t\t\t\tthat.cursor.setAttribute( \"position\", v + padding.left + \" 0 0.003\" );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthat.cursor.setAttribute( \"position\", padding.left + \" 0 0.003\" );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthat.cursor.setAttribute( \"position\", padding.left + \" 0 0.003\" );\n\n\t\t\t}\n\t\t\tgetTextWidth( that.placeholder, placeholder_props );\n\n\t\t}, 0 );\n\n\t\tthis.background.setAttribute( \"color\", this.data.backgroundColor );\n\t\t/*if (this.data.backgroundOpacity) {\n      setTimeout(function() {\n        Utils.updateOpacity(that.background, that.data.backgroundOpacity);\n      }, 0);\n    }*/\n\t\tthis.background.setAttribute( \"width\", this.data.width );\n\t\t//this.background.setAttribute('position', this.data.width/2+' 0 0');\n\t\t//this.background.setAttribute( \"position\", \"0 -0.09 0.001\" );\n\t\tthis.text.setAttribute( \"position\", padding.left - 0.001 + this.data.width / 2 + \" 0 0.002\" );\n\t\tthis.placeholder.setAttribute( \"position\", padding.left - 0.001 + this.data.width / 2 + \" 0 0.002\" );\n\n\t},\n\tupdateCursor: function () {\n\n\t\tthis.cursor.setAttribute( \"width\", this.data.cursorWidth );\n\t\tthis.cursor.setAttribute( \"height\", this.data.cursorHeight );\n\t\tthis.cursor.setAttribute( \"color\", this.data.cursorColor );\n\t\tthis.cursor.setAttribute( \"emissive\", this.data.cursorColor );\n\n\t},\n\tupdate: function () {\n\n\t\tlet that = this;\n\t\tsetTimeout( function () {\n\t\t\t//  Utils.updateOpacity(that.el, that.data.opacity);\n\t\t}, 0 );\n\n\t\tthis.updateCursor();\n\t\tthis.updateText();\n\n\t},\n\ttick: function () {},\n\tremove: function () {\n\nconsole.error(\"input remove\")\nthis.el.removeObject3D( \"mesh\" );\nconsole.error(this)\n//this.background.geometry.dispose();\n//this.background.material.dispose();\n\nthis.el.object3D.remove(this.background)\nthis.el.remove(this.background)\nthis.el.object3D.remove(this.cursor)\nthis.el.remove(this.cursor)\nthis.el.object3D.remove(this.placeholder)\nthis.el.remove(this.placeholder)\nthis.el.object3D.remove(this.text)\nthis.el.remove(this.text)\n\nconsole.error(this.placeholder.object3D)\nconsole.error(this.el.object3D)\n\n\t},\n\tpause: function () {},\n\tplay: function () {}\n} );\n\nAFRAME.registerPrimitive( \"a-input\", {\n\tdefaultComponents: {\n\t\tinput: {}\n\t},\n\tmappings: {\n\t\tvalue: \"input.value\",\n\t\tname: \"input.name\",\n\t\tdisabled: \"input.disabled\",\n\t\tcolor: \"input.color\",\n\t\talign: \"input.align\",\n\t\tfont: \"input.font\",\n\t\t\"letter-spacing\": \"input.letterSpacing\",\n\t\t\"line-height\": \"input.lineHeight\",\n\t\topacity: \"input.opacity\",\n\t\tside: \"input.side\",\n\t\t\"tab-size\": \"input.tabSize\",\n\t\tplaceholder: \"input.placeholder\",\n\t\t\"placeholder-color\": \"input.placeholderColor\",\n\t\t\"max-length\": \"input.maxLength\",\n\t\ttype: \"input.type\",\n\t\twidth: \"input.width\",\n\t\t\"cursor-width\": \"input.cursorWidth\",\n\t\t\"cursor-height\": \"input.cursorHeight\",\n\t\t\"cursor-color\": \"input.cursorColor\",\n\t\t\"background-color\": \"input.backgroundColor\",\n\t\t\"background-opacity\": \"input.backgroundOpacity\"\n\t}\n} );\n"],"sourceRoot":""}